import t from"konva";export default function(i,e){var a=this;void 0===e&&(e={}),this.viewDuration=5e3,this.values=[],this.options={limit:"auto"},this.limits=[0,1],this.loop=function(){var t=[],i=performance.now();a.values.forEach(function(e,s){var o=1-(i-e.time)/a.viewDuration;0!=s&&(t.push(o*a.stage.width()),t.push(a.lastValue)),t.push(o*a.stage.width());var n=(e.value-a.limits[0])/a.limits[1];a.lastValue=a.stage.height()-n*a.stage.height(),t.push(a.lastValue)}),t.push(a.stage.width()),t.push(a.lastValue),a.line.setPoints(t),a.layer.draw(),requestAnimationFrame(a.loop)},this.addValue=function(t){var i=performance.now();if(a.values.push({time:i,value:t}),a.values=a.values.filter(function(t){return i-t.time<a.viewDuration+1e3}),"auto"==a.options.limit){var e=Math.max.apply(Math,a.values.map(function(t){return t.value})),s=Math.min.apply(Math,a.values.map(function(t){return t.value}));a.limits=[s,e]}a.limTop.setText(a.limits[1].toFixed(2)),a.limBot.setText(a.limits[0].toFixed(2)),a.textLayer.draw()},this.options=Object.assign({},this.options,{options:e});var s=this.stage=new t.Stage({container:i,width:i.offsetWidth,height:100}),o=this.layer=new t.Layer;this.line=new t.Line({x:0,y:0,points:[],stroke:"red"}),o.add(this.line),s.add(o),o.draw(),this.textLayer=new t.Layer,this.limTop=new t.Text({x:s.width()/2,y:0,text:"1.00",points:[],fontSize:14,fontFamily:"Roboto",fill:"gray"}),this.limBot=new t.Text({x:s.width()/2,y:s.height()-14,text:"0.00",points:[],fontSize:14,fontFamily:"Roboto",fill:"gray"}),this.textLayer.add(this.limTop),this.textLayer.add(this.limBot),s.add(this.textLayer),requestAnimationFrame(this.loop)}
//# sourceMappingURL=index.mjs.map
